---
title: "CPLN675_midterm"
author: "Jenna Epstein and Kristin Chang"
date: "March 31, 2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(caret)
library(pscl)
library(plotROC)
library(pROC)
library(sf)
library(tidyverse)
library(knitr)
library(kableExtra)
library(FNN)


mapTheme <- function(base_size = 12) {
  theme(
    text = element_text( color = "black"),
    plot.title = element_text(size = 14,colour = "black"),
    plot.subtitle=element_text(face="italic"),
    plot.caption=element_text(hjust=0),
    axis.ticks = element_blank(),
    panel.background = element_blank(),axis.title = element_blank(),
    axis.text = element_blank(),
    axis.title.x = element_blank(),
    axis.title.y = element_blank(),
    panel.grid.minor = element_blank(),
    panel.border = element_rect(colour = "black", fill=NA, size=2)
  )
}

```

```{r}
# Load Calgary fishnet
calgary_fishnet <- st_read("Data_Calgary/Calgary_new/for_R/calgary_fishnet.shp")

```

```{r, Load data tables for features generated in ArcGIS Pro}
# Inundation classification
## Generated by reclassifying the initial inundation raster, and using zonal statistics (maximum) for each fishnet cell
calgary_inundation <- st_read("Data_Calgary/Calgary_new/for_R/cal_inun_max.xls") %>%
  dplyr::select(OID, MAX) %>%
  dplyr::rename(ID_fishnet = OID) %>%
  dplyr::rename(inundation = MAX)

# Elevation mean
## Calculated using zonal statistics (mean) for each fishnet cell
calgary_elev <- st_read("Data_Calgary/Calgary_new/for_R/cal_elev_mean.xls") %>%
  dplyr::select(OID, MEAN) %>%
  dplyr::rename(ID_fishnet = OID) %>%
  dplyr::rename(elevation_mean = MEAN)

```
```{r, load streams for calgary}
# Stream network, generated using the ArcHydro workflow in ArcGIS Pro

calgary_streams <- st_read("HydroData_Calgary_ArcGIS/Data/cal_stream.shp") %>%
  dplyr::rename(ID_stream = arcid) 

```

```{r, load flow accumulation for calgary}

calgary_flowacc <- st_read("HydroData_Calgary_ArcGIS/Data/cal_stream.shp") %>%
  dplyr::rename(ID_stream = arcid) 

```

